{# Automatically extends the right outer layout and also handles AJAX situations #}
{% extends data.outerLayout %}
{% import 'link.html' as link %}
{% import "locales.html" as locales %}

{% set title = data.piece.title or data.page.title %}
{% block title %}
  {{ title }} - {{ data.global.siteTitle or 'ApostropheCMS Demo'}}
  {% if not title %}
    {{ apos.log('Looks like you forgot to override the title block in a template that does not have access to an Apostrophe page or piece.') }}
  {% endif %}
{% endblock %}

{% block extraHead %}
  {#
    This block outputs its contents in the HTML document's <head>.
    It is a good place to put extra <script> <link> and <meta> tags.
  #}
  <link rel="preload" href="/apos-frontend/default/modules/asset/fonts/poppins.subset.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/apos-frontend/default/modules/asset/fonts/quicksand.subset.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/apos-frontend/default/modules/asset/fonts/roboto.subset.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/apos-frontend/default/modules/asset/fonts/roboto-italic.subset.woff2" as="font" type="font/woff2" crossorigin>
{% endblock %}

{% block beforeMain %}
  {% set logoAttachment = apos.image.first(data.global._siteLogo) %}
  {% set logoUrl = apos.attachment.url(logoAttachment, { size: 'one-third' }) %}
  <header class="header">
    <div class="nav-bar">
      <h2>
        <a href="/">
          {% if logoAttachment %}
            <img
              src="{{ logoUrl }}"
              alt="{{ data.global.siteTitle }}"
              width="{{ apos.attachment.getWidth(logoAttachment) or '100' }}"
              height="{{ apos.attachment.getHeight(logoAttachment) or '36' }}"
            >
          {% else %}
            {{ data.global.siteTitle }}
          {% endif %}
        </a>
      </h2>
      <nav class="nav" role="navigation">
        <ul>
          <li>
            <a
              {% if data.page.slug === data.home.slug %}
                class="active"
              {% endif %}
              href="{{ data.home._url }}"
            >{{ data.home.title }}</a>
          </li>
          {% for page in data.home._children %}
            {% if page.visibility === 'public' %}
              <li>
                <a
                  {% if data.page.slug === page.slug %}
                    class="active"
                  {% endif %}
                  href="{{ page._url }}"
                >{{ page.title }}</a>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </nav>
      <div class="nav-bar__end">
        {% include "locales.html" %}
      </div>
      <button class="nav__mobile-button" data-mobile-trigger aria-controls="mobile-nav">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu-icon lucide-menu"><path d="M4 5h16"/><path d="M4 12h16"/><path d="M4 19h16"/></svg>
        <span>Menu</span>
      </button>
    </div>
  </header>
  <div class="mobile-nav" data-mobile-nav="hidden" aria-hidden="true">
    <button class="mobile-nav__close-trigger" data-mobile-close-trigger>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
      <span>Close</span>
    </button>
    <nav id="mobile-nav" class="mobile-nav__nav" role="navigation">
      <ul>
        <li>
          <a
            {% if data.page.slug === data.home.slug %}
              class="active"
            {% endif %}
            href="{{ data.home._url }}"
          >{{ data.home.title }}</a>
        </li>
        {% for page in data.home._children %}
          {% if page.visibility === 'public' %}
            <li>
              <a
                {% if data.page.slug === page.slug %}
                  class="active"
                {% endif %}
                href="{{ page._url }}"
              >{{ page.title }}</a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </nav>
    <div class="mobile-nav__locales">
      {% include "locales.html" %}
    </div>
  </div>
  {% block breadcrumbs %}
    {# Breadcrumb trail to the current page or piece. Not on the home page #}
    {% if data.page and data.page._ancestors.length %}
      <div class="layout">
        <nav class="breadcrumb">
          {% for page in data.page._ancestors %}
            <a href="{{ page._url }}">{{ page.title }}</a>
          {% endfor %}
          <a {{ ('class="current-page"' if not data.piece) | safe }} href="{{ data.page._url }}">{{ data.page.title }}</a>
          {% if data.piece %}
            <a class="current-page" href="{{ data.piece._url }}">{{ data.piece.title }}</a>
          {% endif %}
        </nav>
      </div>
    {% endif %}
  {% endblock %}
  {% block pageTitle %}
    <div class="page-title-wrapper">
      {% set title = data.page.title %}
      {% if data.piece %}
        {% set title = data.piece.title %}
      {% endif %}
      <h1 class="page-title">{{ title }}</h1>
    </div>
  {% endblock %}
  <div class="layout">
    <main>
{% endblock %}

{% block main %}
  {#
    Usually, your page templates in the @apostrophecms/pages module will override
    this block. It is safe to assume this is where your page-specific content
    should go.
  #}
{% endblock %}

{% block afterMain %}
    </main>
  </div>
  <footer class="footer">
    <div class="footer__section footer__top">
      <div class="footer__column footer__column--logo">
        <a href="/" class="footer__logo">
          <svg xmlns="http://www.w3.org/2000/svg" width="822.47" height="156.025" style="pointer-events:auto" viewBox="0 0 822.47 156.025"><title>ApostropheCMS Logo</title><defs><linearGradient id="a" x1="74.26%" x2="24.745%" y1="6.941%" y2="93.175%"><stop offset="0%" stop-color="#cc9300"/><stop offset="47%" stop-color="#ea433a"/><stop offset="100%" stop-color="#b327bf"/></linearGradient><linearGradient id="b" x1="69.688%" x2="30.312%" y1="-4.412%" y2="104.438%"><stop offset="0%" stop-color="#cc9300"/><stop offset="26%" stop-color="#ea433a"/><stop offset="47%" stop-color="#b327bf"/><stop offset="76%" stop-color="#66f"/><stop offset="100%" stop-color="#00bf9a"/></linearGradient><linearGradient id="c" x1="7.604%" x2="74.868%" y1="102.824%" y2="33.108%"><stop offset="0%" stop-color="#b327bf"/><stop offset="47%" stop-color="#66f"/><stop offset="100%" stop-color="#00c09a"/></linearGradient></defs><g fill="none" fill-rule="nonzero"><g fill="currentColor"><path d="M698.528 64.5C696.724 51.47 686.7 43.91 673.7 43.91c-15.32 0-26.86 11.169-26.86 30.126 0 18.929 11.396 30.125 26.86 30.125 13.946 0 23.195-9.02 24.828-20.217l-10.71-.057c-1.346 6.873-6.959 10.739-13.975 10.739-9.507 0-16.323-7.13-16.323-20.59 0-13.23 6.759-20.59 16.352-20.59 7.13 0 12.714 4.038 13.946 11.054zM707.393 44.713v58.647h10.194V62.983h.544l16.208 40.205h7.618l16.208-40.12h.544v40.292h10.194V44.713h-13l-17.41 42.496h-.689l-17.41-42.496zM811.445 60.835h10.223c-.2-9.908-8.648-16.924-21.133-16.924-12.314 0-21.564 6.93-21.535 17.296 0 8.419 5.985 13.259 15.635 15.75l6.673 1.718c6.328 1.604 10.51 3.58 10.538 8.133-.029 5.011-4.782 8.362-11.712 8.362-6.644 0-11.799-2.979-12.228-9.135h-10.452c.43 11.655 9.106 18.212 22.766 18.212 14.06 0 22.221-7.016 22.25-17.353-.029-10.166-8.42-14.805-17.24-16.896l-5.497-1.374c-4.811-1.146-10.023-3.179-9.966-8.076.029-4.41 3.98-7.646 10.624-7.646 6.329 0 10.51 2.95 11.054 7.933M194.488 104.48h-9.85l22.142-61.684h10.725l22.141 61.684h-9.855l-5.622-16.33h-24.032zm8.355-24.158h18.626l-9.051-26.319h-.481zM247.104 121.832V58.221h8.776v7.498h.75a28 28 0 0 1 2.269-3.34 12.6 12.6 0 0 1 4.082-3.33q2.636-1.43 6.897-1.43a17.9 17.9 0 0 1 9.958 2.832 19.2 19.2 0 0 1 6.896 8.16q2.522 5.332 2.522 12.831 0 7.5-2.495 12.843a19.2 19.2 0 0 1-6.837 8.24 17.72 17.72 0 0 1-9.942 2.859c-2.808 0-5.087-.471-6.853-1.413a13.15 13.15 0 0 1-4.158-3.314 24 24 0 0 1-2.328-3.373h-.54v24.548zm8.803-40.482q0 7.293 3.127 11.825t8.921 4.532c2.43.078 4.813-.687 6.745-2.166a13.16 13.16 0 0 0 4.1-5.858 23.7 23.7 0 0 0 1.382-8.344c.05-2.8-.403-5.585-1.34-8.224a12.8 12.8 0 0 0-4.071-5.739 10.73 10.73 0 0 0-6.789-2.106q-5.886 0-8.97 4.413-3.083 4.412-3.105 11.667M318.076 105.417a21.15 21.15 0 0 1-11.34-2.984 20.06 20.06 0 0 1-7.513-8.354q-2.673-5.376-2.673-12.518 0-7.14 2.673-12.588a20.1 20.1 0 0 1 7.529-8.348 21.14 21.14 0 0 1 11.34-2.978q6.525 0 11.341 2.978A20.1 20.1 0 0 1 336.93 69q2.7 5.415 2.7 12.588 0 7.175-2.7 12.518a20.06 20.06 0 0 1-7.496 8.354q-4.833 2.952-11.357 2.957m.033-7.58q4.239 0 6.982-2.231a13.15 13.15 0 0 0 4.088-5.956 25.6 25.6 0 0 0 0-16.307 13.26 13.26 0 0 0-4.088-5.956q-2.743-2.241-6.982-2.247t-7.02 2.247a13.27 13.27 0 0 0-4.116 5.956 25.2 25.2 0 0 0 0 16.307 13.15 13.15 0 0 0 4.115 5.956q2.787 2.258 7.02 2.252zM381.882 69.515l-8.139 1.445a10.25 10.25 0 0 0-2.9-4.26q-2.116-1.944-6.323-1.944c-2.25-.081-4.471.51-6.384 1.7q-2.57 1.706-2.538 4.385a4.5 4.5 0 0 0 1.696 3.747q1.722 1.407 5.546 2.306l7.328 1.69q12.622 2.917 12.616 12.528a12.1 12.1 0 0 1-2.387 7.412 15.93 15.93 0 0 1-6.637 5.062 24.6 24.6 0 0 1-9.84 1.836q-7.782 0-12.648-3.33a14.08 14.08 0 0 1-6.005-9.475l8.684-1.326q1.62 6.87 9.915 6.865 4.418 0 7.058-1.852 2.641-1.852 2.647-4.531 0-4.424-6.524-5.875l-7.809-1.716q-6.48-1.445-9.553-4.7a11.44 11.44 0 0 1-3.062-8.159 11.8 11.8 0 0 1 2.279-7.185 14.9 14.9 0 0 1 6.313-4.802 23.3 23.3 0 0 1 9.224-1.716q7.479 0 11.772 3.248a15.24 15.24 0 0 1 5.67 8.647M413.501 58.22v7.229h-9.461v25.447q0 3.915 1.668 5.04a6.67 6.67 0 0 0 3.856 1.132c.635.008 1.27-.043 1.896-.152l1.258-.238 1.62 7.44q-1.098.388-2.241.616a18.5 18.5 0 0 1-3.586.347 15.9 15.9 0 0 1-6.626-1.267 11.24 11.24 0 0 1-4.958-4.093q-1.879-2.767-1.874-6.958V65.45h-6.755V58.22h6.76V47.138h8.982V58.22zM422.736 104.48V58.22h8.684v7.348h.48a11.24 11.24 0 0 1 4.461-5.886 12.7 12.7 0 0 1 7.258-2.165c.578 0 1.248 0 2.009.06.761.059 1.36.091 1.804.151v8.614a17 17 0 0 0-1.907-.347c-.92-.13-1.85-.195-2.78-.194a11.1 11.1 0 0 0-7.902 2.945 9.82 9.82 0 0 0-3.121 7.488v28.246zM471.89 105.417a21.17 21.17 0 0 1-11.34-2.984 20.05 20.05 0 0 1-7.507-8.354q-2.7-5.376-2.7-12.518 0-7.14 2.7-12.588a20.07 20.07 0 0 1 7.517-8.348 21.17 21.17 0 0 1 11.34-2.978q6.514 0 11.342 2.978a20.1 20.1 0 0 1 7.49 8.375q2.7 5.415 2.7 12.588 0 7.175-2.7 12.518a20.1 20.1 0 0 1-7.49 8.354 21.15 21.15 0 0 1-11.352 2.957m0-7.58q4.24 0 6.983-2.231a13.15 13.15 0 0 0 4.088-5.956 25.5 25.5 0 0 0 0-16.307 13.26 13.26 0 0 0-4.088-5.956q-2.749-2.241-6.983-2.247t-7.02 2.247a13.35 13.35 0 0 0-4.115 5.956 25.3 25.3 0 0 0 0 16.307 13.23 13.23 0 0 0 4.115 5.956q2.813 2.258 7.047 2.252zM501.538 121.832V58.221h8.776v7.498h.745a28 28 0 0 1 2.268-3.34 12.7 12.7 0 0 1 4.083-3.33q2.636-1.43 6.896-1.43a17.9 17.9 0 0 1 9.975 2.832 19.2 19.2 0 0 1 6.896 8.16q2.517 5.332 2.522 12.831.006 7.5-2.495 12.843a19.2 19.2 0 0 1-6.848 8.24 17.72 17.72 0 0 1-9.942 2.859c-2.808 0-5.087-.471-6.853-1.413a13.15 13.15 0 0 1-4.158-3.314 24.5 24.5 0 0 1-2.328-3.373h-.54v24.548zm8.803-40.482q0 7.293 3.127 11.825t8.932 4.532c2.43.078 4.813-.687 6.745-2.166a13.1 13.1 0 0 0 4.099-5.858 23.7 23.7 0 0 0 1.382-8.344 23.2 23.2 0 0 0-1.366-8.235 12.8 12.8 0 0 0-4.072-5.739 10.73 10.73 0 0 0-6.788-2.095q-5.886 0-8.97 4.413-3.083 4.412-3.09 11.667M561.045 77.013v27.467h-8.986V42.8h8.862v22.952h.572a13.14 13.14 0 0 1 4.958-5.956q3.332-2.166 8.71-2.166 7.119 0 11.46 4.397 4.342 4.395 4.32 13.043v29.41h-8.98V76.142q0-5.096-2.614-7.905t-7.269-2.815a10.93 10.93 0 0 0-7.933 3.026q-3.105 3.005-3.1 8.565M620.92 105.417q-6.788 0-11.714-2.951a19.66 19.66 0 0 1-7.56-8.3q-2.658-5.344-2.658-12.513c-.09-4.325.82-8.613 2.657-12.528A19.89 19.89 0 0 1 620.32 57.62c3.436-.01 6.827.789 9.899 2.333a18.06 18.06 0 0 1 7.598 7.44q2.932 5.1 2.927 13.475v3.195h-32.802q.18 6.686 3.78 10.287 3.603 3.6 9.343 3.617a12.8 12.8 0 0 0 6.643-1.657 9.2 9.2 0 0 0 3.99-4.938l8.506 1.532a15.64 15.64 0 0 1-6.61 9.07q-5.13 3.447-12.675 3.443m-12.962-28.1h23.973q0-5.3-3.181-8.782t-8.382-3.476a11.76 11.76 0 0 0-6.356 1.7 12.44 12.44 0 0 0-4.293 4.488 13.7 13.7 0 0 0-1.777 6.07z"/></g><path fill="#fefefe" stroke="#ccc" stroke-width="2" d="m102.976 147.323-29.437 4.672c-20.074 3.19-27.688 2.247-35.643-.541a41.4 41.4 0 0 1-19.722-14.364c-5.087-6.735-8.333-13.704-11.514-33.834L2 73.75c-3.181-20.13-2.242-27.764.54-35.734A41.56 41.56 0 0 1 16.845 18.22c6.718-5.1 13.647-8.354 33.742-11.543l29.437-4.672c20.08-3.19 27.688-2.247 35.643.541A41.5 41.5 0 0 1 135.4 16.894c5.087 6.735 8.327 13.703 11.508 33.833l4.66 29.508c3.182 20.13 2.247 27.759-.54 35.734a41.55 41.55 0 0 1-14.326 19.773c-6.697 5.11-13.647 8.365-33.726 11.58Z" style="pointer-events:auto" transform="translate(1.012 1.012)"/><path fill="url(#a)" d="M69.806 61.787c7.67-1.138 13.897-6.806 15.764-14.351a19.2 19.2 0 0 0-7.243-20.076 19.09 19.09 0 0 0-21.274-.92 19.195 19.195 0 0 0-8.94 19.375 19.1 19.1 0 0 0 7.546 12.491 19 19 0 0 0 14.147 3.481m-.956-6.069a12.99 12.99 0 0 1-13.23-5.91 13.06 13.06 0 0 1 .436-14.513 12.98 12.98 0 0 1 13.56-5.1 13.02 13.02 0 0 1 9.85 10.645c1.165 7.047-3.588 13.707-10.616 14.878" style="pointer-events:auto" transform="translate(36.91 34.512)"/><path fill="url(#b)" d="m8.047 39.107 28.379-4.504a3.06 3.06 0 0 0 2.001-1.228c.478-.659.675-1.481.548-2.286l-4.504-28.5A3.07 3.07 0 0 0 33.245.584a3.06 3.06 0 0 0-2.279-.547L2.582 4.548A3.06 3.06 0 0 0 .584 5.777a3.08 3.08 0 0 0-.546 2.285l4.504 28.5a3.063 3.063 0 0 0 3.505 2.545m2.063-6.54L6.567 10.136l22.33-3.547 3.549 22.437z" transform="translate(36.91 34.512)"/><path fill="url(#c)" d="m26.068 49.465-12.313 34.58a3.08 3.08 0 0 0 .526 2.995 3.06 3.06 0 0 0 2.838 1.071l34.655-5.5a3.07 3.07 0 0 0 2.363-1.902 3.08 3.08 0 0 0-.42-3.01l-22.34-29.063a3.058 3.058 0 0 0-5.31.829m3.883 7.358 15.763 20.509-24.452 3.887z" transform="translate(36.91 34.512)"/></g><script/></svg>
        </a>
      </div>
      <div class="footer__column">
        <h4>Explore ApostropheCMS</h4>
        <ul>
          <li>
            <a href="http://apostrophecms.com/?utm_source=demo" target="_blank">ApostropheCMS.com</a>
          </li>
          <li>
            <a href="https://docs.apostrophecms.org/?utm_source=demo" target="_blank">ApostropheCMS Docs</a>
          </li>
          <li>
            <a href="https://docs.apostrophecms.org/guide/development-setup.html?utm_source=demo" target="_blank">Getting Started</a>
          </li>
          <li>
            <a href="https://apostrophecms.com/assembly?utm_source=demo" target="_blank">ApostropheCMS Multisite</a>
          </li>
          <li>
            <a href="https://meetings.hubspot.com/tom-boutell/demo-meeting?utm_source=demo" target="_blank">Book a Call</a>
          </li>
        </ul>
      </div>
      <div class="footer__column">
        <h4>Product</h4>
        <ul>
          <li><a href="https://apostrophecms.com/extensions?license=pro&amp;utm_source=demo" target="_blank">Pro Feature</a></li>
          <li><a href="https://apostrophecms.com/hosting?utm_source=demo" target="_blank">Hosting</a></li>
          <li><a href="https://apostrophecms.com/blog?category=product-updates&amp;utm_source=demo" target="_blank">Changelog</a></li>
          <li><a href="https://apostrophecms.com/accessibility?utm_source=demo" target="_blank">Accessibility</a></li>
          <li><a href="https://apostrophecms.com/security?utm_source=demo" target="_blank">Security</a></li>
        </ul>
      </div>
      <div class="footer__column">
        <h4>Social Media</h4>
        <ul>
          <li><a href="https://bsky.app/profile/apostrophecms.com" target="_blank">Bluesky</a></li>
          <li><a href="https://x.com/apostrophecms" target="_blank">X / Twitter</a></li>
          <li><a href="https://discord.com/invite/HwntQpADJr" target="_blank">Join the Discord</a></li>
          <li><a href="https://youtube.com/c/apostrophecms" target="_blank">YouTube</a></li>
          <li><a href="https://www.linkedin.com/company/apostrophecms/" target="_blank">LinkedIn</a></li>
        </ul>
      </div>
    </div>
  </footer>
  {# Light/Dark mode switch #}
  <div class="mode-switch" data-mode-switch>
    <label for="light-dark-toggle">
      <span class="sr-only">Toggle dark mode</span>
      <input
        class="toggle-checkbox"
        type="checkbox"
        name="light-dark-toggle"
        id="light-dark-toggle"
        role="switch"
        aria-label="Toggle dark mode"
      >
      <div class="toggle-slot">
        <div class="sun-icon-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="iconify sun-icon" data-icon="feather-sun" data-inline="false"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></g></svg>
        </div>
        <div class="toggle-button"></div>
        <div class="moon-icon-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="iconify moon-icon" data-icon="feather-moon" data-inline="false"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79"></path></svg>
        </div>
      </div>
    </label>
  </div>
{% endblock %}
