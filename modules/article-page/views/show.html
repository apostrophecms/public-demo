{% import 'fragments.html' as fragments with context %}

{% extends "layout.html" %}
{% set article = data.piece %}
{% set attachment = apos.image.first(article._image) %}
{% set url = apos.attachment.url(attachment, { size: size }) %}

{% block pageTitle %}
  <div class="article-title-wrapper">
    <div class="inner">
      {% set title = data.page.title %}
      {% if data.piece %}
        {% set title = data.piece.title %}
      {% endif %}
      <h1 class="page-title">{{ title }}</h1>
    </div>
    {% if article._topics.length %}
      <div class="inner article-topics article-topics--show">
        {% for topic in article._topics %}
          <a href="{{ article._parentSlug }}?topics={{ topic.slug }}" class="chip">{{ topic.title }}</a>
        {% endfor %}
      </div>
    {% endif %}
  </div>
{% endblock %}

{% block main %}
  <article class="article-show general-content">
    {% if url %}
      <img class="article-show__image" src="{{ url }}" alt="{{ article.title }}">
    {% endif %}
    {% area article, 'main' %}
  </article>
{% endblock %}
